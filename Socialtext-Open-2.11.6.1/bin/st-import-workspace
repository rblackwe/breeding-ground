#!/usr/bin/env perl
#
# Copyright (C) 2004-2006 by Socialtext, Inc.
#

eval 'exec /usr/local/bin/perl -w -S $0 ${1+"$@"}'
    if 0; # not running under some shell

use FindBin;
use lib "$FindBin::Bin/../lib";
use strict;
use warnings;
use Getopt::Long;

use Socialtext::Workspace;


my %opts;
GetOptions(
    'help'      => \$opts{help},
    'tarball:s' => \$opts{tarball},
    'overwrite' => \$opts{overwrite}
) or exit 1;

show_help() if $opts{help} || ! defined $opts{tarball};

my $overwrite = $opts{overwrite} || 0;

Socialtext::Workspace->ImportFromTarball(
    tarball   => $opts{tarball},
    overwrite => $overwrite,
);

sub show_help {
    print <<"EOF";

 st-import-workspace --tarball <path_to_tarball>
                  [ --overwrite ] [ --help ]

 Imports the workspace from a tarball generated by workspace delete or
 workspace export.

 Options:
 --tarball <path_to_tarball>  (required) path to the tar.gz file to import
 --overwrite                  Whether to overwrite existing workspace info
 --help                       produce this output

EOF
    exit(0);
} 
